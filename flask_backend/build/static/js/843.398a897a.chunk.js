"use strict";(self.webpackChunkinsight=self.webpackChunkinsight||[]).push([[843],{6632:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var r=t(1413),l=t(885),s=t(2791),o=t(276),c=t(5726),n=t(7494),i=t(3015),h=t(8286),u=t(2457),d=t(184);var f=function(e){var a=e.data,t=e.ylabel,r=e.xlabel,l=e.chartWidth,o=(0,s.useContext)(u.N).theme;return a.marker="dark"===o?{color:"#279adc"}:{color:"#1F77B4"},(0,d.jsx)(h.Z,{data:[a],layout:"dark"===o?l<550?{margin:{r:0,b:40,l:40,t:15},autosize:!0,paper_bgcolor:"#1c1c1e",plot_bgcolor:"#1c1c1e",font:{color:"#fff"},yaxis:{showgrid:!1,title:{text:t},automargin:!0,showticklabels:!1},xaxis:{title:{text:r},automargin:!0,showticklabels:!1},bargap:.1}:{margin:{r:0,b:40,l:40,t:15},autosize:!0,paper_bgcolor:"#1c1c1e",plot_bgcolor:"#1c1c1e",font:{color:"#fff"},yaxis:{showgrid:!1,title:{text:t},automargin:!0,showticklabels:!1},xaxis:{title:{text:r},automargin:!0},bargap:.1}:l<550?{margin:{r:0,b:40,l:40,t:15},autosize:!0,paper_bgcolor:"#f2f2f6",plot_bgcolor:"#f2f2f6",font:{color:"#000"},yaxis:{showgrid:!1,title:{text:t},automargin:!0,showticklabels:!1},xaxis:{title:{text:r},automargin:!0,showticklabels:!1},bargap:.1}:{margin:{r:0,b:40,l:40,t:15},autosize:!0,paper_bgcolor:"#f2f2f6",plot_bgcolor:"#f2f2f6",font:{color:"#000"},yaxis:{showgrid:!1,title:{text:t},automargin:!0,showticklabels:!1},xaxis:{title:{text:r},automargin:!0},bargap:.1},useResizeHandler:!0,style:{width:"100%",height:"100%"}})},b=[{value:"avon-and-somerset",label:"Avon and Somerset Constabulary"},{value:"bedfordshire",label:"Bedfordshire Police"},{value:"cambridgeshire",label:"Cambridgeshire Constabulary"},{value:"cheshire",label:"Cheshire Constabulary"},{value:"city-of-london",label:"City of London Police"},{value:"cleveland",label:"Cleveland Police"},{value:"cumbria",label:"Cumbria Constabulary"},{value:"derbyshire",label:"Derbyshire Constabulary"},{value:"devon-and-cornwall",label:"Devon & Cornwall Police"},{value:"dorset",label:"Dorset Police"},{value:"durham",label:"Durham Constabulary"},{value:"dyfed-powys",label:"Dyfed-Powys Police"},{value:"essex",label:"Essex Police"},{value:"gloucestershire",label:"Gloucestershire Constabulary"},{value:"greater-manchester",label:"Greater Manchester Police"},{value:"gwent",label:"Gwent Police"},{value:"hampshire",label:"Hampshire Constabulary"},{value:"hertfordshire",label:"Hertfordshire Constabulary"},{value:"humberside",label:"Humberside Police"},{value:"kent",label:"Kent Police"},{value:"lancashire",label:"Lancashire Constabulary"},{value:"leicestershire",label:"Leicestershire Police"},{value:"lincolnshire",label:"Lincolnshire Police"},{value:"merseyside",label:"Merseyside Police"},{value:"metropolitan",label:"Metropolitan Police Service"},{value:"norfolk",label:"Norfolk Constabulary"},{value:"north-wales",label:"North Wales Police"},{value:"north-yorkshire",label:"North Yorkshire Police"},{value:"northamptonshire",label:"Northamptonshire Police"},{value:"northumbria",label:"Northumbria Police"},{value:"nottinghamshire",label:"Nottinghamshire Police"},{value:"northern-ireland",label:"Police Service of Northern Ireland"},{value:"south-wales",label:"South Wales Police"},{value:"south-yorkshire",label:"South Yorkshire Police"},{value:"staffordshire",label:"Staffordshire Police"},{value:"suffolk",label:"Suffolk Constabulary"},{value:"surrey",label:"Surrey Police"},{value:"sussex",label:"Sussex Police"},{value:"thames-valley",label:"Thames Valley Police"},{value:"warwickshire",label:"Warwickshire Police"},{value:"west-mercia",label:"West Mercia Police"},{value:"west-midlands",label:"West Midlands Police"},{value:"west-yorkshire",label:"West Yorkshire Police"},{value:"wiltshire",label:"Wiltshire Police"}],m=[{value:"Asian",label:"Asian"},{value:"Black",label:"Black"},{value:"Mixed",label:"Mixed"},{value:"Other",label:"Other"},{value:"White",label:"White"}],g=["January","February","March","April","May","June","July","August","September","October","November","December"],v=t(2269),p=t(6794),x=t(2175),j=t.p+"static/media/Eze.d2b0e53a4152be419797.jfif",y=t.p+"static/media/Brook.9d81ff6f2d9f2613f2c6.jfif",w=t(757),k=function(){var e=(0,s.useState)((function(){return localStorage.getItem("force")||"metropolitan"})),a=(0,l.Z)(e,2),t=a[0],h=a[1],u=(0,s.useState)((function(){return localStorage.getItem("ethnicity")||"White"})),k=(0,l.Z)(u,2),S=k[0],_=k[1],N=(0,s.useState)(null),P=(0,l.Z)(N,2),Z=P[0],C=P[1],M=(0,s.useState)(null),E=(0,l.Z)(M,2),W=E[0],F=E[1],D=(0,s.useState)(!0),z=(0,l.Z)(D,2),A=z[0],B=z[1],L=(0,s.useState)(!0),I=(0,l.Z)(L,2),O=I[0],T=I[1],Y=(0,s.useState)({error:!1,message:null}),H=(0,l.Z)(Y,2),V=H[0],G=H[1];(0,s.useEffect)((function(){w.ZP.send("pageview")}),[]);(0,s.useEffect)((function(){var e=t,a=S,r="";if(null===Z)r="http://localhost:5000/stopsearch/data?force=".concat(e,"&ethnicity=").concat(a);else{var l=Z;r="http://localhost:5000/stopsearch/data?force=".concat(e,"&ethnicity=").concat(a,"&month=").concat(l)}fetch(r).then((function(e){if(!e.ok)throw new Error("Error! Status: ".concat(e.status,", Message: ").concat(e.statusText));return e.json()})).then((function(e){F(e),B(!1),T(!1)})).catch((function(e){G({error:!0,message:e.message})}))}),[t,S,Z]);var J=(0,s.useState)(!0),K=(0,l.Z)(J,2),R=K[0],U=K[1],q=(0,s.useState)([]),Q=(0,l.Z)(q,2),X=Q[0],$=Q[1];(0,s.useEffect)((function(){U(!0),fetch("http://localhost:5000/stopsearch/forces").then((function(e){if(!e.ok)throw new Error("Error! Status: ".concat(e.status,", Message: ").concat(e.statusText));return e.json()})).then((function(e){var a=[];b.forEach((function(t){e.includes(t.value)&&a.push(t)})),$(a),U(!1)})).catch((function(e){G({error:!0,message:e.message})}))}),[]);var ee=(0,s.useState)(!0),ae=(0,l.Z)(ee,2),te=ae[0],re=ae[1],le=(0,s.useState)([]),se=(0,l.Z)(le,2),oe=se[0],ce=se[1];(0,s.useEffect)((function(){re(!0);var e=t,a="";if(null===Z)a="http://localhost:5000/stopsearch/ethnicity?force=".concat(e);else{var r=Z;a="http://localhost:5000/stopsearch/ethnicity?force=".concat(e,"&month=").concat(r)}fetch(a).then((function(e){if(!e.ok)throw new Error("Error! Status: ".concat(e.status,", Message: ").concat(e.statusText));return e.json()})).then((function(e){var a=[];m.forEach((function(t){e.includes(t.value)&&a.push(t)})),ce(a),re(!1)})).catch((function(e){G({error:!0,message:e.message})}))}),[t,Z]);var ne=(0,s.useState)(),ie=(0,l.Z)(ne,2),he=ie[0],ue=ie[1],de=(0,s.useState)(!0),fe=(0,l.Z)(de,2),be=fe[0],me=fe[1],ge=(0,s.useState)([]),ve=(0,l.Z)(ge,2),pe=ve[0],xe=ve[1];(0,s.useEffect)((function(){me(!0),fetch("http://localhost:5000/stopsearch/months?force=".concat(t)).then((function(e){if(!e.ok)throw new Error("Error! Status: ".concat(e.status,", Message: ").concat(e.statusText));return e.json()})).then((function(e){return e.map((function(e){return new Date(e)}))})).then((function(e){ue(new Date(e.slice(-1)[0])),xe(e),me(!1)})).catch((function(e){G({error:!0,message:e.message})}))}),[t]);var je=(0,s.useState)(),ye=(0,l.Z)(je,2),we=ye[0],ke=ye[1],Se=(0,s.useRef)(),_e=function(){var e=Se.current.clientWidth;ke(e)};return(0,s.useEffect)((function(){_e()}),[]),(0,s.useEffect)((function(){window.addEventListener("resize",_e)}),[]),(0,d.jsxs)("div",{className:"stop-search-dashboard",children:[(0,d.jsx)("h1",{children:"UK stop and search dashboard"}),(0,d.jsxs)("div",{className:"select-container",children:[(0,d.jsx)("h2",{children:"Select options"}),(0,d.jsxs)("div",{className:"select-inputs",children:[(0,d.jsx)("span",{className:"force-label",children:"Police force:"}),(0,d.jsx)("div",{className:"force-dropdown",children:(0,d.jsx)(o.Z,{initialValue:t,value:t,onChange:function(e){B(!0),C(null),h(e),G({error:!1,message:null}),localStorage.setItem("force",e),w.ZP.event({category:"force change",action:"change force select",label:e})},dropdownClassName:"force-dropdown","aria-label":"select police force data",disableMatchWidth:!0,children:X.map((function(e){var a=e.value,t=e.label;return(0,d.jsx)(o.Z.Option,{value:a,"aria-label":t,children:t},a)}))})}),(0,d.jsx)("span",{className:"month-label",children:"Month:"}),(0,d.jsx)("div",{className:"month-picker",children:(0,d.jsx)(v.M,{views:["year","month"],openTo:"year",minDate:pe[0],maxDate:pe.slice(-1)[0],value:he,onChange:function(e){ue(e),B(!0),C("".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)),G({error:!1,message:null}),w.ZP.event({category:"month change",action:"change month select",label:"".concat(e.getFullYear(),"-").concat(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)})},renderInput:function(e){return(0,d.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{helperText:null}))}})}),(0,d.jsx)("span",{className:"race-label",children:"Suspect's race:"}),(0,d.jsx)("div",{className:"race-dropdown",children:(0,d.jsx)(o.Z,{initialValue:S,value:S,onChange:function(e){T(!0),_(e),G({error:!1,message:null}),localStorage.setItem("ethnicity",e),w.ZP.event({category:"ethnicity change",action:"change ethnicity select",label:e})},dropdownClassName:"ethnicity-dropdown","aria-label":"select police ethnicity data",children:oe.map((function(e){var a=e.value,t=e.label;return(0,d.jsx)(o.Z.Option,{value:a,"aria-label":t,children:t},a)}))})})]})]}),(0,d.jsx)("div",{className:"monthly-stop-search-container",children:(0,d.jsx)("div",{className:"monthly-stop-search-figure",children:V.error?(0,d.jsx)(d.Fragment,{children:V.message}):R||be||A?(0,d.jsx)(c.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"figure-title",children:[(0,d.jsxs)("span",{children:["Number of stop and searches in ",g[he.getMonth()],", ",he.getFullYear()]}),(0,d.jsx)(n.Z,{text:(0,d.jsx)(i.Z,{font:"1.4rem",children:"Number of stop and searches this month and percentage change compared to previous month"}),placement:"bottomEnd",children:(0,d.jsx)(x.kIV,{})})]}),(0,d.jsxs)("div",{className:"stop-search-no",children:[(0,d.jsx)("span",{className:"month-stop-search",children:W.figure_1.monthly_no_stop_search}),(0,d.jsxs)("span",{className:"percentage-change \n              ".concat(W.figure_1.pct_change>0?"positive":0===W.figure_1.pct_change?"":"negative"),children:[W.figure_1.pct_change>0?(0,d.jsx)(x.Kh3,{}):0===W.figure_1.pct_change?(0,d.jsx)(x.WF_,{}):(0,d.jsx)(x._ME,{}),W.figure_1.pct_change+"%"]})]})]})})}),(0,d.jsxs)("div",{className:"charts",children:[(0,d.jsx)("div",{className:"chart",ref:Se,children:V.error?(0,d.jsx)(d.Fragment,{children:V.message}):R||be||A?(0,d.jsx)(c.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{children:"Stop and search count by race"}),(0,d.jsx)(f,{data:W.breakdown_by_race,ylabel:"Stop & search count",xlabel:"Suspect's race",chartWidth:we})]})}),(0,d.jsx)("div",{className:"chart",children:V.error?(0,d.jsx)(d.Fragment,{children:V.message}):te||A||O?(0,d.jsx)(c.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{children:["Breakdown of ",S.toLowerCase()," suspects by officer's race"]}),(0,d.jsx)(f,{data:W.breakdown_by_police_ethnicity,ylabel:"Stop & search count",xlabel:"Race of officer conducting stop & search",chartWidth:we})]})}),(0,d.jsx)("div",{className:"chart",children:V.error?(0,d.jsx)(d.Fragment,{children:V.message}):te||A||O?(0,d.jsx)(c.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{children:["Breakdown of ",S.toLowerCase()," suspects by object of search"]}),(0,d.jsx)(f,{data:W.breakdown_of_object_of_search_by_ethnicity,ylabel:"Stop & search count",xlabel:"Object for stop & search",chartWidth:we})]})}),(0,d.jsx)("div",{className:"chart",children:V.error?(0,d.jsx)(d.Fragment,{children:V.message}):te||A||O?(0,d.jsx)(c.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{children:["Breakdown of ",S.toLowerCase()," suspects by outcomes"]}),(0,d.jsx)(f,{data:W.breakdown_of_outcomes_by_ethnicity,ylabel:"Stop & search count",xlabel:"Outcome of stop & search",chartWidth:we})]})})]}),(0,d.jsxs)("div",{className:"contributors",children:[(0,d.jsx)("h2",{children:"Contributors"}),(0,d.jsxs)("div",{className:"avatar-images",children:[(0,d.jsxs)("a",{href:"https://github.com/ezeahunanya",className:"contributor-link",target:"_blank",rel:"noreferrer",children:[(0,d.jsx)("img",{src:j,alt:"Avatar",className:"avatar"}),(0,d.jsx)("span",{children:"Eze Ahunanya"})]}),(0,d.jsxs)("a",{href:"https://github.com/Primebrook",className:"contributor-link",target:"_blank",rel:"noreferrer",children:[(0,d.jsx)("img",{src:y,alt:"Avatar",className:"avatar"}),(0,d.jsx)("span",{children:"Brook Abraha"})]})]})]})]})};var S=function(){return(0,d.jsx)(k,{})}}}]);
//# sourceMappingURL=843.398a897a.chunk.js.map